name: CI

on: pull_request

jobs:
    # WAS: michaelw90/PHP-Lint@master, stuck on docker PHP7.3!
    # WORKS for: StephaneBour/actions-php-lint@8.1 = simply "php -l"
    phplint:
        name: PHP Lint
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - uses: overtrue/phplint@9.1.1
    php-codesniffer:
        name: PHP CS
        needs: [ phplint ]
        runs-on: ubuntu-22.04
        strategy:
          matrix:
            php_version: [7.4, 8.0, 8.1, 8.3]
        steps:
        - name: Codesniffer
          uses: pipeline-components/php-codesniffer@v0.31.0
          with:
            options: -s -p --colors --extensions=php --runtime-set testVersion ${{matrix.php_version}}
